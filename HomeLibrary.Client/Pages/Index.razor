@page "/"
@using HomeLibrary.Client.HttpClients
@using HomeLibrary.Shared.Dto
@inject OpenLibraryClient openLibraryClient

<div>
    <h1>Hello, world!</h1>

    Welcome to your new app.

    <EditForm Model="@ISBN" OnValidSubmit="Send">
        <InputText @bind-Value="@ISBN"></InputText>
        <button type="submit">Send</button>
    </EditForm>
    @if(book.Book != null)
    {
        <p>@book.Book.cover.large</p>
    }
    else
    {
        <p>Empty</p>
    }
</div>

@code { 
    public string ISBN { get; set; } = String.Empty;
    OpenLibraryBookDto book = new OpenLibraryBookDto();

    public async Task Send()
    {
        book = await openLibraryClient.GetBook(ISBN);
    }
}
